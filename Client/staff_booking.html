<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Giao di·ªán Nh√¢n vi√™n - ƒê·∫∑t S√¢n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/Client/css/style_staff.css">
</head>

<body>
    <div class="staff-wrapper">

        <!-- ====================== HEADER ======================= -->
        <header class="staff-header">
            <div class="header-left">
                <h2 id="main-title">‚öΩ Qu·∫£n l√Ω ƒê·∫∑t S√¢n</h2>
            </div>
            <nav class="staff-nav">
                <a id="nav-booking" class="nav-item active" data-content="booking-content">ƒê·∫∑t S√¢n</a>
                <a id="nav-schedule" class="nav-item" data-content="schedule-content">L·ªãch Ca</a>
                <a id="nav-notification" class="nav-item" data-content="notification-content">Th√¥ng b√°o</a>
            </nav>
            <div class="profile-info">
                <span class="user-name" id="userName"></span>
                <span class="logout-btn" id="logoutBtn">ƒêƒÉng xu·∫•t</span>
            </div>
        </header>

        <!-- ====================== MAIN CONTENT ======================= -->
        <div class="main-content-staff">

            <!-- ====================== TAB: ƒê·∫∂T S√ÇN ======================= -->
            <div id="booking-content">
                <div class="controls-bar">
                    <div class="filter-group">
                        <label for="date-select">Ng√†y:</label>
                        <input type="date" id="date-select" value="2025-11-25">
                    </div>

                    <div class="filter-group">
                        <label for="field-filter">S√¢n:</label>
                        <select id="field-filter">
                            <option value="all">T·∫•t c·∫£</option>
                        </select>
                    </div>

                    <button class="btn-primary create-btn">‚ûï T·∫°o ƒê∆°n M·ªõi</button>
                </div>

                <section class="booking-grid-container card">
                    <h3>L·ªãch ƒê·∫∑t S√¢n H√¥m Nay</h3>
                    <div class="booking-grid" id="bookingGrid">
                        <div class="header-cell">Gi·ªù</div>
                    </div>
                </section>
            </div>

            <!-- ====================== TAB: L·ªäCH CA ======================= -->
            <div id="schedule-content">
                <div class="controls-bar schedule-controls">
                    <div class="filter-group">
                        <label for="start-date-select">Ng√†y B·∫Øt ƒê·∫ßu:</label>
                        <input type="date" id="start-date-select" value="2025-11-24">
                    </div>

                    <div class="filter-group">
                        <label for="end-date-select">Ng√†y K·∫øt Th√∫c:</label>
                        <input type="date" id="end-date-select" value="2025-11-30">
                    </div>

                    <button class="btn-primary view-schedule-btn">Xem L·ªãch</button>
                </div>

                <section class="schedule-table-container card">
                    <h3>L·ªãch L√†m Vi·ªác C·ªßa B·∫°n</h3>

                    <div class="schedule-grid personal-schedule-grid">
                        <div class="schedule-header-cell employee-col">Ca l√†m vi·ªác</div>
                        <div class="schedule-header-cell day-col">Th·ª© Hai (24)</div>
                        <div class="schedule-header-cell day-col">Th·ª© Ba (25)</div>
                        <div class="schedule-header-cell day-col">Th·ª© T∆∞ (26)</div>
                        <div class="schedule-header-cell day-col">Th·ª© NƒÉm (27)</div>
                        <div class="schedule-header-cell day-col">Th·ª© S√°u (28)</div>
                        <div class="schedule-header-cell day-col">Th·ª© B·∫£y (29)</div>
                        <div class="schedule-header-cell day-col">Ch·ªß Nh·∫≠t (30)</div>

                        <div class="shift-cell"><span class="shift-badge shift-morning">S√°ng (8:00 - 12:00)</span></div>
                        <div class="shift-cell"><span class="shift-badge shift-full">To√†n ca (8:00 - 17:00)</span></div>
                        <div class="shift-cell"><span class="shift-badge shift-dayoff">Ngh·ªâ</span></div>
                        <div class="shift-cell"><span class="shift-badge shift-afternoon">Chi·ªÅu (13:00 - 17:00)</span></div>
                        <div class="shift-cell"><span class="shift-badge shift-night">T·ªëi (17:00 - 22:00)</span></div>
                        <div class="shift-cell weekend"><span class="shift-badge shift-full">To√†n ca</span></div>
                        <div class="shift-cell weekend"><span class="shift-badge shift-dayoff">Ngh·ªâ</span></div>
                        <div class="shift-cell weekend"><span class="shift-badge shift-dayoff">Ngh·ªâ</span></div>
                    </div>
                </section>
            </div>

            <!-- ====================== TAB: TH√îNG B√ÅO ======================= -->
            <div id="notification-content">
                <div class="controls-bar">
                    <h3 style="margin-right: auto;">Danh s√°ch Th√¥ng b√°o</h3>
                    <button class="btn-primary mark-all-read-btn">ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc t·∫•t c·∫£</button>
                </div>

                <section class="notification-list-container card">
                    <div class="notification-list">

                        <div class="notification-item unread" data-type="booking">
                            <div class="icon-box new-booking">üîî</div>
                            <div class="notification-details">
                                <p class="notification-title">ƒê∆°n ƒë·∫∑t s√¢n m·ªõi c·∫ßn x√°c nh·∫≠n</p>
                                <p class="notification-message">
                                    Kh√°ch h√†ng <b>Nguy·ªÖn VƒÉn A</b> ƒë√£ ƒë·∫∑t S√¢n B, t·ª´ 19:00 - 20:00 (25/11/2025).
                                </p>
                                <span class="notification-time">5 ph√∫t tr∆∞·ªõc</span>
                            </div>
                            <button class="mark-read-btn">ƒê√£ ƒë·ªçc</button>
                        </div>

                        <div class="notification-item unread" data-type="shift">
                            <div class="icon-box shift-change">üîÑ</div>
                            <div class="notification-details">
                                <p class="notification-title">Ca l√†m vi·ªác c√≥ thay ƒë·ªïi</p>
                                <p class="notification-message">
                                    Ca Th·ª© T∆∞ (27/11) ƒë·ªïi t·ª´ <b>S√°ng</b> sang <b>Chi·ªÅu</b>.
                                </p>
                                <span class="notification-time">1 gi·ªù tr∆∞·ªõc</span>
                            </div>
                            <button class="mark-read-btn">ƒê√£ ƒë·ªçc</button>
                        </div>

                    </div>
                </section>
            </div>
        </div>

        <!-- ========================= EDIT BOOKING MODAL ========================= -->
        <div id="editBookingModal" class="modal-overlay" style="display: none;">
            <div class="modal-content card">
                <h3>‚úèÔ∏è Chi ti·∫øt ƒê∆°n ƒê·∫∑t S√¢n</h3>

                <div class="form-section">
                    <h4>Th√¥ng tin C∆° b·∫£n</h4>
                    <div class="form-row">
                        <div class="form-group half-width">
                            <label>M√£ ƒë∆°n:</label>
                            <input type="text" id="edit-booking-id" readonly>
                        </div>

                        <div class="form-group half-width">
                            <label>Kh√°ch h√†ng:</label>
                            <input type="text" id="edit-customer-name">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group half-width">
                            <label>Ng√†y:</label>
                            <input type="date" id="edit-date">
                        </div>

                        <div class="form-group half-width">
                            <label for="edit-Khu">Khu:</label>
                            <select id="edit-Khu"></select>
                        </div>

                        <div class="form-group half-width">
                            <label for="edit-field">S√¢n:</label>
                            <select id="edit-field"></select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group half-width">
                            <label>B·∫Øt ƒë·∫ßu:</label>
                            <select id="edit-start-time"></select>
                        </div>

                        <div class="form-group half-width">
                            <label>K·∫øt th√∫c:</label>
                            <select id="edit-end-time"></select>
                        </div>
                    </div>
                </div>

                <div class="form-section">
                    <h4>Thanh to√°n</h4>
                    <div class="form-row">
                        <!-- <div class="form-group half-width">
                            <label>Tr·∫°ng th√°i:</label>
                            <select id="edit-payment-status">
                                <option value="pending">Ch∆∞a thanh to√°n</option>
                                <option value="confirmed">ƒê√£ c·ªçc</option>
                                <option value="paid">ƒê√£ thanh to√°n ƒë·ªß</option>
                            </select>
                        </div> -->

                        <div class="form-group half-width">
                            <label>Gi√° s√¢n (VNƒê):</label>
                            <input type="number" id="edit-price" readonly>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button class="btn-secondary" id="deleteBookingBtn">üóëÔ∏è X√≥a</button>
                    <button class="btn-primary" id="saveBookingBtn">L∆∞u</button>
                    <button class="btn-secondary" id="closeEditModalBtn">ƒê√≥ng</button>
                </div>
            </div>
        </div>

        <!-- ========================= NEW BOOKING MODAL ========================= -->
        <div id="newBookingModal" class="modal-overlay" style="display: none;">
    <div class="modal-content card">
        <h3>‚ú® T·∫°o ƒê∆°n ƒê·∫∑t S√¢n M·ªõi</h3>

        <!-- TH√îNG TIN KH√ÅCH -->
        <div class="form-section">
            <h4>Th√¥ng tin Kh√°ch</h4>
            <div class="form-group">
                <label for="new-customer-name">T√™n kh√°ch h√†ng <span class="required">*</span></label>
                <input type="text" id="new-customer-name">
            </div>
        </div>

        <!-- TH·ªúI GIAN & S√ÇN -->
        <div class="form-section">
            <h4>Th·ªùi gian & S√¢n</h4>

            <div class="form-row">
                <div class="form-group half-width">
                    <label for="new-date">Ng√†y ƒë·∫∑t</label>
                    <input type="date" id="new-date" value="2025-11-25">
                </div>

                <div class="form-group half-width">
                    <label for="new-Khu">Khu</label>
                    <select id="new-Khu"></select>
                </div>

                <div class="form-group half-width">
                    <label for="new-field">S√¢n</label>
                    <select id="new-field"></select>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group half-width">
                    <label for="new-start-time">B·∫Øt ƒë·∫ßu</label>
                    <select id="new-start-time"></select>
                </div>

                <div class="form-group half-width">
                    <label for="new-end-time">K·∫øt th√∫c</label>
                    <select id="new-end-time"></select>
                </div>
            </div>
        </div>

        <!-- T√çNH TO√ÅN & THANH TO√ÅN -->
        <div class="form-section">
            <h4>T√≠nh to√°n & Thanh to√°n</h4>
            <div class="calculation-summary">
                <p>T·ªïng th·ªùi gian ƒë·∫∑t: <span class="value-display" id="calculated-duration"></span></p>
                <p>ƒê∆°n gi√°/s√¢n: <span class="value-display" id="price-per-hour"></span></p>
                <p>T·ªïng ti·ªÅn: <span class="value-display" id="calculated-total"></span></p>
            </div>
        </div>

        <!-- GHI CH√ö -->
        <div class="form-section">
            <h4>Ghi ch√∫</h4>
            <textarea id="new-notes" rows="2" placeholder="Ghi ch√∫ n·ªôi b·ªô..."></textarea>
        </div>

        <!-- ACTION BUTTONS -->
        <div class="form-actions">
            <button class="btn-secondary" id="closeNewModalBtn">H·ªßy</button>
            <button class="btn-primary" id="submitNewBookingBtn">X√°c nh·∫≠n ƒë·∫∑t s√¢n</button>
        </div>
    </div>
</div>


    </div>

    <!-- Menu logic -->
    <script>
        function showContent(contentId, title) {
            document.getElementById('booking-content').style.display = 'none';
            document.getElementById('schedule-content').style.display = 'none';
            document.getElementById('notification-content').style.display = 'none';

            document.getElementById(contentId).style.display = 'block';
            document.getElementById('main-title').innerText = title;

            document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
            document.querySelector(`[data-content="${contentId}"]`).classList.add('active');
        }

        document.getElementById('nav-booking').onclick = () =>
            showContent('booking-content', '‚öΩ Qu·∫£n l√Ω ƒê·∫∑t S√¢n');

        document.getElementById('nav-schedule').onclick = () =>
            showContent('schedule-content', 'üóìÔ∏è L·ªãch Ca L√†m');

        document.getElementById('nav-notification').onclick = () =>
            showContent('notification-content', 'üîî Th√¥ng b√°o');

        showContent('booking-content', '‚öΩ Qu·∫£n l√Ω ƒê·∫∑t S√¢n');
    </script>

    <!-- Supabase SDK -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.6/dist/umd/supabase.js"></script>

    <!-- Main JS -->
    <script src="./js/supabase-booking.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

</body>

</html>
